# 关于"看见Bug立即就解"的不良工作习惯及正确的做法
                                            ---磊哥
我几乎每天都看见这样一个现象，"看见Bug立即就解"。只要是测试反馈了一个Bug，我们的程序员马上拿起电脑，追踪日志、复现问题、发现对应的问题代码，然后立即处理。

这种做法是极其错误和低效的行为！

你怎么知道解决了这个问题，不会产生另外的其他问题？
你怎么知道彻底解决了这个问题吗？
光看日志，你一定能复现出原有的问题吗？

你如果回答不了上面三个问题，那么就认真看下我的经验：

1. 关注整体系统的上下文关系。
1）使用UML部署图（C4也行），把系统上下文清理出来，你的系统的上游系统是谁？下游系统是谁？
2）检查系统接口之间的调用关系，通讯协议、接口规范、接口协议、输入参数和调用参数的边界值是否正确。
3）检查你当前系统正确启动的前提依赖条件是什么？

2. 关注当前Bug所处业务的整体流程逻辑
1）使用UML时序图，时序图的纵坐标是各个模块，从第一步走到最后一步清理业务和代码之间的关系。
2）往往在检查过程中，大部分情况是代码逻辑没有实现对应的业务逻辑。常见的问题：
a.没有检查或者疏忽了某个函数成功执行业务的成立条件。
b.业务职责本身就很混乱。一定要通过时序图梳理清楚，然后再改进。
c.具体的业务流程某些独立环节，混杂在某个角落里面，根本无法与具体的类、函数无法对应。
d.函数拆分不严谨，父流程和子流程在一个函数体内。

3. 更高级的问题
1）要检查分层架构，严格遵守：数据单向流、同层之间不能直接调用的法则
2）检查共享组件、事件、网络连接的状态管理，一定要独立管理，不要混杂在某个业务代码中。
3）检查设计模式，错误的设计模式导致程序更加混乱。

4. 函数编写规范
函数分为依次三部分
1）第一段，检查业务成立的条件，必须校验入参，尤其是边界值。
2）第二段，把注释加上，通过注释梳理内部的函数逻辑，然后再写代码。
3）第三段，转换成下游系统或者用户需要的输出。输出的数据不要和表现层代码混在一起。